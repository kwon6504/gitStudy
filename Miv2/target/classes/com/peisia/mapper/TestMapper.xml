<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.peisia.mapper.TestMapper">
	<select id="getData1" resultType="com.peisia.spring.dto.TestDto">
		SELECT no,str_data from tbl_test where no = 1
	</select>
	
	<select id="getData2" resultType="com.peisia.spring.dto.TestDto">
		SELECT * from tbl_test where no = 2
	</select>
	
	<select id="getData3" resultType="com.peisia.spring.dto.TestDto">
		SELECT * from tbl_test where no = 3
	</select>
	
	<select id="getData4" resultType="com.peisia.spring.dto.TestDto">
		SELECT * from tbl_test where no = 4
	</select>
	
	<!-- <select id="getData5" parameterType="com.peisia.spring.dto.TestDto">
		SELECT * from tbl_test where no like concat('%',#{nooo},'%');
	</select> -->
	
	<select id="getData5" parameterType="com.peisia.spring.dto.TestDto">
		SELECT * from tbl_test where no = #{no};
	</select>
	
	<insert id="insertData1" parameterType="com.peisia.spring.dto.TestDto">
		insert into tbl_test values(
		#{no},
		#{str_data}
		)
	</insert>
	
	
	<delete id="deleteData1" parameterType="com.peisia.spring.dto.TestDto">
		delete from tbl_test 
		where no =
		#{no}
		and
		str_data =
		#{str_data};
		</delete>
		
	<delete id="deleteData2" parameterType="com.peisia.spring.dto.TestDto">
		<!--
		delete from tbl_test 
		where no like %#{nooo}% and str_data like %#{str_data}%; 
		xml 에서는 %가 특별한 의미를 가지고 있기 때문에 문제가 발생한다.
		-->
		DELETE FROM tbl_test 
    	WHERE no LIKE CONCAT('%', #{no}, '%') AND str_data LIKE CONCAT('%', #{str_data}, '%');
	</delete>
	
	<update id="updateData1" parameterType="com.peisia.spring.dto.TestDto">
		update tbl_test
		set no = #{ab} ,str_data = #{cd} where str_data = #{str_data} and no = #{no};
	</update>
	
 	<insert id="insertCount1" parameterType="com.peisia.spring.dto.TestDto">
		insert into tbl_visitant_count(no,count) values(
		#{no},
		#{count}
		)
	</insert>
	
	<update id="updateCount1" parameterType="com.peisia.spring.dto.TestDto">
		update tbl_visitant_count
		set count = #{count}+1 where no = #{no};
	</update> 
		
	<select id="getCount1" resultType="com.peisia.spring.dto.TestDto">
		SELECT * from tbl_visitant_count where no = #{no};
	</select>
	
	</mapper>